# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more

windowrule = suppress_event maximize, match:class .*

# Just dash of opacity by default
windowrule {
  name = global_rules
  match:class = .*
  opacity = 0.88 0.8
  idle_inhibit = fullscreen
}

# Fix some dragging issues with XWayland
windowrule {
  name = fix_drag_xwayland
  match:class = ^$
  match:title = ^$
  match:xwayland = true
  match:float = true
  match:fullscreen = false # 0
  match:pin = false # 0

  windowrule = no_focus on
}

windowrule = opacity 1.0 override, match:tag alpha_1

# --- Terminals ---
# Define terminal tag to style them uniformly
windowrule = tag +terminal, match:class (Alacritty|kitty|com.mitchellh.ghostty)
windowrule = size (monitor_w*0.55) (monitor_h*0.5), match:tag terminal
windowrule = scroll_touchpad 1.5, match:tag terminal

windowrule = border_size 1, match:float true
# active/inactvie border color respectively
windowrule = border_color $foreground $color5, match:float true

# doing just 'minsize 940 540,floating:1' will make even steam tiny windows big..

windowrule = border_size 1, match:pin 1
windowrule = no_initial_focus 1, match:pin 1
windowrule = no_follow_mouse 1, match:pin 1
windowrule = max_size 560 320, match:pin 1 # dynamic rule

# group rules
windowrule = group set, match:class brave-browser|emacs
windowrule = workspace 1 silent, match:class brave-browser
# no group windows anywhere besides 1st workspace
windowrule = group deny, match:workspace 2 # unset will work as well
windowrule = group deny, match:workspace 3
windowrule = group deny, match:workspace 4
windowrule = group deny, match:workspace 5

# Dynamic opacity for certain tabs in brave browser
windowrule = opacity 1.0 1.0, match:title .*(YouTube|Zoom|Daily) - Brave$

# --- Picture-in-Picture rules ---
# windowrule = tag +pip, title:(Picture.{0,1}in.{0,1}[Pp]icture)
# windowrule = tag +pip, match:title (Picture.in.[Pp]icture)
windowrule = tag +pip, match:title (Picture.?in.?[Pp]icture)
# windowrule = move 100-w-300 0, match:tag pip
# https://wiki.hypr.land/Configuring/Window-Rules/#expressions
windowrule = move (monitor_w-window_w-40) (monitor_h*0.04), match:tag pip
# windowrule = move 100%-w-40 4%, match:tag pip
# windowrule = size 560 320, tag:pip
windowrule = size 600 338, match:tag pip
windowrule = opacity 1 1, match:tag pip
# Picture-in-picture overlays
windowrule = float 1, match:tag pip
windowrule = pin 1, match:tag pip
windowrule = keep_aspect_ratio 1, match:tag pip
windowrule = border_size 0, match:tag pip

# yes.. you need to suppress ALL those events in order for popup windows to not
# 'unmaximise' your fullscreen clients..
windowrule = suppress_event fullscreen, match:tag pip
windowrule = suppress_event maximize, match:tag pip
windowrule = suppress_event activatefocus, match:tag pip
windowrule = no_initial_focus 1, match:tag pip

# Some video sites should never have opacity applied to them
windowrule = opacity 1.0 1.0, match:initial_title ((?i)(?:[a-z0-9-]+\.)*youtube\.com_/|app\.zoom\.us_/wc/home)

# don't mess me my gaming
windowrule = workspace 1 silent, match:class Pinentry-gtk
windowrule = workspace 1 silent, match:class gcr-prompter

# --- mpv ---
windowrule = opacity 1 1, match:class mpv
windowrule = no_blur 1, match:class mpv

# --- gaming stuff ---

windowrule = workspace 2 silent, match:class vesktop
windowrule = workspace 4 silent, match:class com.github.wwmm.easyeffects
windowrule = workspace 3 silent, match:class heroic

# --- Floating windows ---
windowrule {
  name = float_tag
  match:float = true
  tag = +floating-window
}

windowrule = tag +floating-window, match:class (xdg-desktop-portal-gtk|DesktopEditors)
windowrule = tag +floating-window, match:class (TUI.float|com.gabm.satty)
windowrule = tag +floating-window, match:title ^(Open.*Files?|Open [F|f]older.*|Save.*Files?|Save.*As|Save|All Files|.*wants to [open|save].*|[C|c]hoose.*)
windowrule = tag +floating-window, match:float true

windowrule {
  name = floating_windows
  float = 1
  group = barred
  center = 1
  # size = (940) (540)
  size = (monitor_w*0.55) (monitor_h*0.5)
  match:tag = floating-window
}

# Fullscreen screensaver
windowrule = fullscreen 1, match:class Screensaver

# No transparency on media windows
windowrule = opacity 1 1, match:class ^(zoom|vlc|mpv|org.kde.kdenlive|com.obsproject.Studio|com.github.PintaProject.Pinta|imv|org.gnome.NautilusPreviewer)$

# --- Steam ---
windowrule = workspace 3 silent, match:class steam
windowrule = size 460 800, match:class steam, match:title Friends List
windowrule = opacity 1 1, match:class steam
windowrule = idle_inhibit fullscreen, match:class steam
windowrule = no_blur 1, match:class steam

# games (applies to Steam, Heroic & Godot games)
windowrule = tag +game, match:class (steam_app.*)
windowrule = tag +game, match:initial_class (Godot)
windowrule {
  name = games
  workspace = 3 silent
  no_blur = 1
  opacity = 1 1
  fullscreen = 1
  no_anim = 1
  rounding = 0
  match:tag = game
}

# --- layer rules ---
layerrule {
  name = layerrules_rofi
  blur = 1
  ignore_alpha = 0.5
  animation = popin 85%
  match:namespace = match:namespace rofi
}

# layerrule = ignore_zero 1, match:namespace rofi
