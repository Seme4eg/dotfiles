#!/bin/bash

seed=$(tr </dev/urandom -dc A-Za-z0-9 | head -c6)
tempdir=~/tmp/wallhaven

# if no dir create otherwise delete everything in it
# also removing last pic before script runs allows me to preserve recent pic
# if i liked it
[[ ! -d /tmp/wallhaven ]] && mkdir /tmp/wallhaven || /bin/rm $tempdir/*

# ratios=portrait&
timeout 1s waitwifi &&
  curl -s "https://wallhaven.cc/api/v1/search?q=men&categories=010&ratios=9x16%2C1x1%2C10x16%2C3x2%2C9x18%2C4x3%2C5x4&sorting=random&seed=$seed" |
  jq -r '.data[0].path' | wget -P $tempdir -i - && echo $tempdir/* && exit 0

echo $(find ~/Pictures/Avbl/ -type f | sort --random-sort | head -n 1)

exit 0
